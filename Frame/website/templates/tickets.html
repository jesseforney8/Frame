{% extends "base1.html" %}

{% block title%} Tickets {% endblock%}

{% block body %}

<ul class="list-group">
    {% for ticket in tickets %}
    <li class="list-group-item"></li>
        <p1  id="id">{{ticket.id}}</p1>
        <p1><b>Title:</b> {{ ticket.title }}</p1>
        <p1><b>Description:</b> {{ ticket.body }}</p1>
        <p1><b>Ticket Owner:</b><p1 id="owner"class="infoclass">{{ ticket.owner }}</p1></p1>
        <p1><b>Ticket Submitter:</b><p1 id="submitter"class="infoclass"> {{ ticket.submitter }}</p1></p1>
        <p1><b>Ticket Type:</b><p1 id="type"class="infoclass"> {{ ticket.type }}</p1></p1>
        <p1><b>Urgency:</b><p1 id="urgency"class="infoclass"> {{ ticket.urgency }}</p1></p1>


        
        {% if user.role == "Manager" %}
        
        <button class="btn btn-primary" id="btn_{{ticket.id}}" onclick="GotoTicket('{{ticket.id}}')">test</button>
         
        
        
        
                <div class="d-grid gap-2 d-md-block">
                    <button class="btn btn-primary" type="button" onclick="deleteTicket('{{ticket.id}}')">Delete</button>
                </div>
        
        {% endif %}
    </li>
    {% endfor %}



</ul>



<script>
function GotoTicket(ticketId) {
            fetch("/tickets", {
              method: "POST",
              body: JSON.stringify({ ticketId: ticketId}),
            }).then((_res) => {
                window.location.href = "/ticket";
            });
          }
        
</script>














{% endblock %}